<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SSL 加密 | Valjeanth&#39;s blog</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/logo.jpg">
    <meta name="description" content="我亦飘零久，十年来，深恩负尽">
    
    <link rel="preload" href="/assets/css/0.styles.60dd0459.css" as="style"><link rel="preload" href="/assets/js/app.0ca42ae6.js" as="script"><link rel="preload" href="/assets/js/2.515f669a.js" as="script"><link rel="preload" href="/assets/js/44.49edbd69.js" as="script"><link rel="prefetch" href="/assets/js/10.4260b3ca.js"><link rel="prefetch" href="/assets/js/100.6421f402.js"><link rel="prefetch" href="/assets/js/101.753d4f5a.js"><link rel="prefetch" href="/assets/js/102.04d0f91c.js"><link rel="prefetch" href="/assets/js/103.fce5b587.js"><link rel="prefetch" href="/assets/js/104.0c1d91c6.js"><link rel="prefetch" href="/assets/js/105.6fc090b0.js"><link rel="prefetch" href="/assets/js/106.eb04df43.js"><link rel="prefetch" href="/assets/js/107.1ed6d9d7.js"><link rel="prefetch" href="/assets/js/108.49134f48.js"><link rel="prefetch" href="/assets/js/109.46747f86.js"><link rel="prefetch" href="/assets/js/11.88b87b82.js"><link rel="prefetch" href="/assets/js/110.741b0788.js"><link rel="prefetch" href="/assets/js/111.8ad168c8.js"><link rel="prefetch" href="/assets/js/112.1dd92670.js"><link rel="prefetch" href="/assets/js/113.36b21cde.js"><link rel="prefetch" href="/assets/js/114.8c3be7f7.js"><link rel="prefetch" href="/assets/js/115.aa32a5a3.js"><link rel="prefetch" href="/assets/js/116.c623be61.js"><link rel="prefetch" href="/assets/js/117.f301d9c7.js"><link rel="prefetch" href="/assets/js/118.58eb2a6e.js"><link rel="prefetch" href="/assets/js/119.84201e70.js"><link rel="prefetch" href="/assets/js/12.ba2c56b3.js"><link rel="prefetch" href="/assets/js/120.d4f914fb.js"><link rel="prefetch" href="/assets/js/121.11bc675f.js"><link rel="prefetch" href="/assets/js/122.532b2aa0.js"><link rel="prefetch" href="/assets/js/123.8f7cab97.js"><link rel="prefetch" href="/assets/js/124.dc742648.js"><link rel="prefetch" href="/assets/js/125.6a76c691.js"><link rel="prefetch" href="/assets/js/126.ba2f5e66.js"><link rel="prefetch" href="/assets/js/127.6e07b924.js"><link rel="prefetch" href="/assets/js/128.82fc423e.js"><link rel="prefetch" href="/assets/js/129.d9481933.js"><link rel="prefetch" href="/assets/js/13.976410ef.js"><link rel="prefetch" href="/assets/js/130.ee749818.js"><link rel="prefetch" href="/assets/js/131.b4dd6ab8.js"><link rel="prefetch" href="/assets/js/132.11d6a700.js"><link rel="prefetch" href="/assets/js/133.ef42d156.js"><link rel="prefetch" href="/assets/js/134.d21933e8.js"><link rel="prefetch" href="/assets/js/135.e324a67b.js"><link rel="prefetch" href="/assets/js/136.ae22e3fd.js"><link rel="prefetch" href="/assets/js/137.44125a63.js"><link rel="prefetch" href="/assets/js/138.90654653.js"><link rel="prefetch" href="/assets/js/139.0ebaf63b.js"><link rel="prefetch" href="/assets/js/14.e80a197e.js"><link rel="prefetch" href="/assets/js/140.2079d708.js"><link rel="prefetch" href="/assets/js/141.8e4d75b9.js"><link rel="prefetch" href="/assets/js/142.83530f40.js"><link rel="prefetch" href="/assets/js/143.7c173663.js"><link rel="prefetch" href="/assets/js/144.2f3f7052.js"><link rel="prefetch" href="/assets/js/145.cfd7fd4d.js"><link rel="prefetch" href="/assets/js/146.beded037.js"><link rel="prefetch" href="/assets/js/147.bb629f5d.js"><link rel="prefetch" href="/assets/js/148.f9eaf4a6.js"><link rel="prefetch" href="/assets/js/149.c32d056f.js"><link rel="prefetch" href="/assets/js/15.29d46668.js"><link rel="prefetch" href="/assets/js/150.9e8fd1d5.js"><link rel="prefetch" href="/assets/js/151.7ddadbf1.js"><link rel="prefetch" href="/assets/js/152.4cdea0b2.js"><link rel="prefetch" href="/assets/js/153.20ed70a0.js"><link rel="prefetch" href="/assets/js/154.da8fb617.js"><link rel="prefetch" href="/assets/js/155.6434a5e4.js"><link rel="prefetch" href="/assets/js/156.48d7ae00.js"><link rel="prefetch" href="/assets/js/157.bdef5aef.js"><link rel="prefetch" href="/assets/js/158.ea38b600.js"><link rel="prefetch" href="/assets/js/159.62a5224a.js"><link rel="prefetch" href="/assets/js/16.cd6ae33a.js"><link rel="prefetch" href="/assets/js/160.8c5ad686.js"><link rel="prefetch" href="/assets/js/161.97be7ce4.js"><link rel="prefetch" href="/assets/js/162.fbf93ae3.js"><link rel="prefetch" href="/assets/js/163.918582a9.js"><link rel="prefetch" href="/assets/js/164.72f6a0bc.js"><link rel="prefetch" href="/assets/js/165.f827ebab.js"><link rel="prefetch" href="/assets/js/166.15d06ffe.js"><link rel="prefetch" href="/assets/js/167.7df80607.js"><link rel="prefetch" href="/assets/js/168.863f80be.js"><link rel="prefetch" href="/assets/js/169.ab705a84.js"><link rel="prefetch" href="/assets/js/17.ef754595.js"><link rel="prefetch" href="/assets/js/170.12e580e7.js"><link rel="prefetch" href="/assets/js/171.11a30b2a.js"><link rel="prefetch" href="/assets/js/172.9807ea7e.js"><link rel="prefetch" href="/assets/js/173.84c6c833.js"><link rel="prefetch" href="/assets/js/174.fdcf6905.js"><link rel="prefetch" href="/assets/js/175.18d4a0fd.js"><link rel="prefetch" href="/assets/js/176.2f11ad7e.js"><link rel="prefetch" href="/assets/js/177.349808b6.js"><link rel="prefetch" href="/assets/js/178.92f16f7d.js"><link rel="prefetch" href="/assets/js/18.748745ae.js"><link rel="prefetch" href="/assets/js/19.0dc2491a.js"><link rel="prefetch" href="/assets/js/20.58a81011.js"><link rel="prefetch" href="/assets/js/21.6791ffce.js"><link rel="prefetch" href="/assets/js/22.b7737885.js"><link rel="prefetch" href="/assets/js/23.13c52e18.js"><link rel="prefetch" href="/assets/js/24.b5cc4189.js"><link rel="prefetch" href="/assets/js/25.5179744c.js"><link rel="prefetch" href="/assets/js/26.15071d70.js"><link rel="prefetch" href="/assets/js/27.5dc790d0.js"><link rel="prefetch" href="/assets/js/28.f661e5a0.js"><link rel="prefetch" href="/assets/js/29.ccd17902.js"><link rel="prefetch" href="/assets/js/3.03c42818.js"><link rel="prefetch" href="/assets/js/30.133e4b80.js"><link rel="prefetch" href="/assets/js/31.97ad996e.js"><link rel="prefetch" href="/assets/js/32.aa847bf2.js"><link rel="prefetch" href="/assets/js/33.caff8a6f.js"><link rel="prefetch" href="/assets/js/34.c39015f6.js"><link rel="prefetch" href="/assets/js/35.99dce353.js"><link rel="prefetch" href="/assets/js/36.25276d0a.js"><link rel="prefetch" href="/assets/js/37.3ee0cf49.js"><link rel="prefetch" href="/assets/js/38.5312a451.js"><link rel="prefetch" href="/assets/js/39.cb875e0c.js"><link rel="prefetch" href="/assets/js/4.55b24f61.js"><link rel="prefetch" href="/assets/js/40.7bb1ce63.js"><link rel="prefetch" href="/assets/js/41.1476e2aa.js"><link rel="prefetch" href="/assets/js/42.94ec0921.js"><link rel="prefetch" href="/assets/js/43.57464c8f.js"><link rel="prefetch" href="/assets/js/45.7d9bf1e6.js"><link rel="prefetch" href="/assets/js/46.82129287.js"><link rel="prefetch" href="/assets/js/47.c81e8da4.js"><link rel="prefetch" href="/assets/js/48.97bc83ad.js"><link rel="prefetch" href="/assets/js/49.d8bbad3b.js"><link rel="prefetch" href="/assets/js/5.2d78771d.js"><link rel="prefetch" href="/assets/js/50.f29dd3d7.js"><link rel="prefetch" href="/assets/js/51.6d4d9750.js"><link rel="prefetch" href="/assets/js/52.b738267c.js"><link rel="prefetch" href="/assets/js/53.07789ac4.js"><link rel="prefetch" href="/assets/js/54.88b3b39c.js"><link rel="prefetch" href="/assets/js/55.4b5a5bd1.js"><link rel="prefetch" href="/assets/js/56.19136ce9.js"><link rel="prefetch" href="/assets/js/57.b2d4e97d.js"><link rel="prefetch" href="/assets/js/58.a71287e5.js"><link rel="prefetch" href="/assets/js/59.5d05a341.js"><link rel="prefetch" href="/assets/js/6.a2648412.js"><link rel="prefetch" href="/assets/js/60.36566b7b.js"><link rel="prefetch" href="/assets/js/61.7fb8bd5e.js"><link rel="prefetch" href="/assets/js/62.79c495ea.js"><link rel="prefetch" href="/assets/js/63.818f4818.js"><link rel="prefetch" href="/assets/js/64.2e1edce8.js"><link rel="prefetch" href="/assets/js/65.ff262b83.js"><link rel="prefetch" href="/assets/js/66.60acc120.js"><link rel="prefetch" href="/assets/js/67.deb435db.js"><link rel="prefetch" href="/assets/js/68.eb6c7329.js"><link rel="prefetch" href="/assets/js/69.7d811fcb.js"><link rel="prefetch" href="/assets/js/7.fd97ac92.js"><link rel="prefetch" href="/assets/js/70.c35e94a7.js"><link rel="prefetch" href="/assets/js/71.1de0d635.js"><link rel="prefetch" href="/assets/js/72.5a76251b.js"><link rel="prefetch" href="/assets/js/73.6ddc25d9.js"><link rel="prefetch" href="/assets/js/74.8b6a24a3.js"><link rel="prefetch" href="/assets/js/75.729ca7db.js"><link rel="prefetch" href="/assets/js/76.e7124283.js"><link rel="prefetch" href="/assets/js/77.6864f29c.js"><link rel="prefetch" href="/assets/js/78.2465a4d6.js"><link rel="prefetch" href="/assets/js/79.56801182.js"><link rel="prefetch" href="/assets/js/8.2b28110d.js"><link rel="prefetch" href="/assets/js/80.b1714fa0.js"><link rel="prefetch" href="/assets/js/81.d20c21da.js"><link rel="prefetch" href="/assets/js/82.de9be220.js"><link rel="prefetch" href="/assets/js/83.53811558.js"><link rel="prefetch" href="/assets/js/84.ac8c69ec.js"><link rel="prefetch" href="/assets/js/85.3c2e589a.js"><link rel="prefetch" href="/assets/js/86.27d25c85.js"><link rel="prefetch" href="/assets/js/87.b1a6cc13.js"><link rel="prefetch" href="/assets/js/88.58582737.js"><link rel="prefetch" href="/assets/js/89.efc33e31.js"><link rel="prefetch" href="/assets/js/9.ea793fe0.js"><link rel="prefetch" href="/assets/js/90.75a19669.js"><link rel="prefetch" href="/assets/js/91.22469024.js"><link rel="prefetch" href="/assets/js/92.7e49cbb7.js"><link rel="prefetch" href="/assets/js/93.fe94d538.js"><link rel="prefetch" href="/assets/js/94.45248260.js"><link rel="prefetch" href="/assets/js/95.7fb3b93f.js"><link rel="prefetch" href="/assets/js/96.11147273.js"><link rel="prefetch" href="/assets/js/97.49775c49.js"><link rel="prefetch" href="/assets/js/98.8f9ef363.js"><link rel="prefetch" href="/assets/js/99.01b8e783.js">
    <link rel="stylesheet" href="/assets/css/0.styles.60dd0459.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="assets/logo.jpg" alt="Valjeanth's blog" class="logo"> <span class="site-name can-hide">Valjeanth's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/net/" class="nav-link router-link-active">
  网络方面
</a></div><div class="nav-item"><a href="/advance/" class="nav-link">
  前端进阶
</a></div><div class="nav-item"><a href="/life/" class="nav-link">
  lifeRain
</a></div><div class="nav-item"><a href="/vue/" class="nav-link">
  vue 知识
</a></div><div class="nav-item"><a href="/react/" class="nav-link">
  react 知识
</a></div><div class="nav-item"><a href="/computerBase/" class="nav-link">
  碰到的问题
</a></div><div class="nav-item"><a href="/css/" class="nav-link">
  css基础
</a></div><div class="nav-item"><a href="/accumulate/" class="nav-link">
  js基础
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法基础
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/net/" class="nav-link router-link-active">
  网络方面
</a></div><div class="nav-item"><a href="/advance/" class="nav-link">
  前端进阶
</a></div><div class="nav-item"><a href="/life/" class="nav-link">
  lifeRain
</a></div><div class="nav-item"><a href="/vue/" class="nav-link">
  vue 知识
</a></div><div class="nav-item"><a href="/react/" class="nav-link">
  react 知识
</a></div><div class="nav-item"><a href="/computerBase/" class="nav-link">
  碰到的问题
</a></div><div class="nav-item"><a href="/css/" class="nav-link">
  css基础
</a></div><div class="nav-item"><a href="/accumulate/" class="nav-link">
  js基础
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法基础
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">Home</a></li><li><a href="/net/TCP简介.html" class="sidebar-link">TCP 简介</a></li><li><a href="/net/TCP的报文.html" class="sidebar-link">TCP 的报文</a></li><li><a href="/net/TCP的连接管理.html" class="sidebar-link">TCP 的连接管理</a></li><li><a href="/net/TCP的窗口滑动.html" class="sidebar-link">/net/TCP的窗口滑动.html</a></li><li><a href="/net/TCP的超时时间.html" class="sidebar-link">TCP 的超时时间</a></li><li><a href="/net/TCP的拥塞机制.html" class="sidebar-link">/net/TCP的拥塞机制.html</a></li><li><a href="/net/http状态码.html" class="sidebar-link">http 的转态码</a></li><li><a href="/net/http首部.html" class="sidebar-link">http 的首部</a></li><li><a href="/net/http的get和post的区别.html" class="sidebar-link">get 和 post 区别</a></li><li><a href="/net/http和https.html" class="sidebar-link">http 和 https</a></li><li><a href="/net/http的版本.html" class="sidebar-link">htpp 1.0/1.1/2.0/3.0</a></li><li><a href="/net/CDN原理.html" class="sidebar-link">CDN 原理</a></li><li><a href="/net/DNS原理.html" class="sidebar-link">DNS 的原理</a></li><li><a href="/net/cookie的作用.html" class="sidebar-link">cookie 的作用</a></li><li><a href="/net/SSL加密.html" class="active sidebar-link">SSL 加密</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/net/SSL加密.html#前言" class="sidebar-link">前言</a></li><li class="sidebar-sub-header"><a href="/net/SSL加密.html#ssl-的加密方法" class="sidebar-link">SSL 的加密方法</a></li><li class="sidebar-sub-header"><a href="/net/SSL加密.html#证书的问题" class="sidebar-link">证书的问题</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="ssl-加密"><a href="#ssl-加密" class="header-anchor">#</a> SSL 加密</h1> <h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <p>了解 SSL 加密之前，还得说明几个概念，不然后面就很不好理解。</p> <ol><li><p>秘钥：秘钥是加密或者解密算法所要传递的参数，也就是说，给了这个正确参数，再给上密文，就能输出明文。反过来也是如此。自己的理解类似于随机数的种子，如果没有种子的话，随机数就总是一样的了。</p></li> <li><p>对称加密： 就是传递双方都用一个秘钥进行加密与解密</p></li> <li><p>非对称加密 RSA： 双方使用公钥和私钥进行加密和解密，当 a 想和 b 发送信息时，它可以用 b 的公钥进行加密，b 得到密文之后，用自己的私钥进行解密，得到信息。简单来说，公钥和私钥是一对，公钥加密的内容只有私钥能解密，私钥加密的内容只有对应的公钥能解密。</p></li> <li><p>私钥：非对称加密的其中一个参数，一般自己留着，不能让其他人知道。</p></li> <li><p>公钥： 非对称加密的另一把钥匙，一般会把它给想要和自己通信的一方，让它用自己的公钥加密信息。</p></li> <li><p>SSL/TLS:  之前以为 TLS 又是一种协议，实际上，这只是 SSL 协议的 3.0 版本</p></li></ol> <h2 id="ssl-的加密方法"><a href="#ssl-的加密方法" class="header-anchor">#</a> SSL 的加密方法</h2> <p>ssl 加密是结合了对称加密和非对称加密的。</p> <p>原因在于：</p> <ol><li><p>对于对称加密，效率虽然高，但是，你的秘钥还是得通过网络连接传的啊，如果秘钥被人截取到了，后面的内容就不是加密的了。</p></li> <li><p>对于非对称加密，虽然加密措施比较好，但是非常的耗时间去计算。而网页最重要的性能就是加载速度了。</p></li></ol> <p>所以，ssl 才用两种结合的方法。</p> <p>ssl 加密过程会发生 5 次握手。如下图：</p> <p><img src="http://www.ruanyifeng.com/blogimg/asset/2014/bg2014092003.png" alt=""></p> <p>总结起来就是：</p> <ol><li><p>客户端给出 通信的协议版本号，自己的加密方法，一个生成的随机数(Client Random)</p></li> <li><p>服务端确认双方的加密方法，给出自己的数字证书(后面会说到)，一个随机生成的随机数(Server Random)</p></li> <li><p>客户端确认数字证书的有效性，再生成一个随机数 (Premaster secret),并使用证书中的公钥对信息对 Premaster secret 进行加密</p></li> <li><p>服务端用自己的私钥对发送的随机数进行解密，得到 Premaster secret</p></li> <li><p>至此，双方都有了三个随机数，并约定加密方法，用这三个随机数生成一个秘钥--对话秘钥(session key),之后的通信都用这个session key 进行加密通信信息。</p></li></ol> <hr> <p>简而言之，就是先用非对称加密，得到一个 session key，之后，用这个 session key 对传输信息进行对称加密。</p> <p>这样，别人最多只能截取你两个随机数，因为第三个 premaster secret 是通过非对称加密发送的。</p> <p>所以，也就得不到传输所用的 session key</p> <hr> <h2 id="证书的问题"><a href="#证书的问题" class="header-anchor">#</a> 证书的问题</h2> <p>证书的出现，主要是为了解决这样一个问题，通信的对方给我的公钥到底是不是别人伪造的。</p> <p>一旦别人劫持了你的通信请求，给你返回一个它自己的公钥，你之后加密 premaster secret 其实就是给了攻击人了，之后你的通信一直就是在和攻击人通信。</p> <p>所以，为了确认你想通信的对方给你公钥是你想要通信的那一方，对方就得证明它的身份，这也就是证书的由来。</p> <p>为了能增加可信度，证书一般都是由值得信任的权威机构颁发。颁发证书的机构叫 CA (Certificate Authority)</p> <hr> <p>首先，证书是一个文件，里面包含了关于网站的信息：网站的域名，证书有效时间，签发机构等等。</p> <p>文件的格式叫做 X.509, 储存上分两种，一种是 DER 是二进制的，另一种是 PEM 是基于 base64的</p> <p>这些看看就行了，下面的东西就得理解了。</p> <hr> <p>证书文件主要由两部分组成：</p> <ol><li><p>站点的信息，内容包括其公钥等，经过 hash算法生成 一个信息摘要，只要稍微改动摘要就会巨变</p></li> <li><p>数字签名，由上述信息摘要，经过 CA 的私钥得到的数字签名</p></li></ol> <p>如下图：</p> <p><img src="/assets/img/certificate.54ee4ae0.jpg" alt=""></p> <p>客户端得到证书后，会用 CA 的公钥解密数字签名，看看是否和信息摘要一样，一样的话就说明通信时安全的。</p> <p>okk ，来解释上面的一些做法。</p> <p>我们采用这样复杂的操作，是为了避免证书被人伪造，或者修改。</p> <p>因为你发来的证书还要经过不安全的网络传输的。</p> <p>要想发来的证书有效，CA 用自己的私钥进行加密，生成一个难以伪造的数字签名。</p> <p>而接受端如何解开这个数字签名呢？，当然是用 CA 的公钥，很方便的是，CA 的公钥是内置在操作系统中的。</p> <p>也就是说我们每个人的电脑里都内置了 CA 的公钥，可以解开这个数字证书。</p> <p>如此，就可以做到比较安全的通信了。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/net/cookie的作用.html" class="prev">
        cookie 的作用
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.0ca42ae6.js" defer></script><script src="/assets/js/2.515f669a.js" defer></script><script src="/assets/js/44.49edbd69.js" defer></script>
  </body>
</html>
